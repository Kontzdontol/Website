<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Meme Generator</title>
  <link rel="stylesheet" href="style.css" />
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-0E5Q5ZHERX"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-0E5Q5ZHERX');
  </script>
</head>
<body>
  <div class="background-layer background-gif"></div>
  <div class="background-layer background-jpg"></div>

  <img src="images/profile.png" alt="Profile Icon" class="profile-icon" id="profileIcon" />
  <div class="popup profile-popup" id="profilePopup">
    <span class="close-popup" data-popup="profilePopup">&times;</span>
    <img src="images/profile-photo.jpg" alt="Foto Profil" class="popup-photo" />
    <h3>Hamzah Nor Sihab</h3>
    <p>Hi, I'm Hamzah from Kudus, Indonesia, an economics graduate with a strong passion for learning new things. I’m a self-taught enthusiast in the fields of cryptocurrency and Web3.</p>
  </div>

  <img src="images/email.png" alt="Email Icon" class="email-icon" id="emailIcon" />
  <div class="popup email-popup" id="emailPopup">
    <span class="close-popup" data-popup="emailPopup">&times;</span>
    <h3>📧 Contact Email</h3>
    <p><a href="mailto:hamzahnorsihab@gmail.com">hamzahnorsihab@gmail.com</a></p>
  </div>

  <img src="images/insta.png" alt="Instagram Icon" class="insta-icon" id="instaIcon" />
  <div class="popup insta-popup" id="instaPopup">
    <span class="close-popup" data-popup="instaPopup">&times;</span>
    <h3>📸 Instagram</h3>
    <p><a href="https://instagram.com/h.n.sihab" target="_blank">@h.n.sihab</a></p>
  </div>

  <img src="images/twitter.png" alt="Twitter Icon" class="twitter-icon" id="twitterIcon" />
  <div class="popup twitter-popup" id="twitterPopup">
    <span class="close-popup" data-popup="twitterPopup">&times;</span>
    <h3>🐦 X account</h3>
    <p><a href="https://twitter.com/hazama_sol" target="_blank">@hazama_sol</a></p>
  </div>

  <img src="images/medium.png" alt="Medium Icon" class="medium-icon" id="mediumIcon" />
  <div class="popup medium-popup" id="mediumPopup">
    <span class="close-popup" data-popup="mediumPopup">&times;</span>
    <h3>✍️ Medium Articles</h3>
    <div id="mediumArticles">Loading articles...</div>
  </div>

  <img src="images/editor.png" id="openImageModal" alt="Buka Editor" class="clickable editor-button" />
  <div id="imageModal" class="modal">
    <div class="modal-content">
      <span class="close" id="closeImageModal">&times;</span>
      <h2>🖼️ Photo Editor</h2>
      <input type="file" id="imageInput" accept="image/*" style="margin-top: 10px;" />
      <div id="promptContainer" style="display: none; margin-top: 10px;">
        <label for="imagePrompt">Masukkan prompt untuk edit gambar:</label>
        <input type="text" id="imagePrompt" placeholder="Contoh: ubah jadi kartun" style="width: 100%; padding: 8px;" />
        <button id="generateImageBtn" style="margin-top: 10px; padding: 10px 20px;">Upload & Generate</button>
      </div>
      <div id="resultAreaImage" style="margin-top: 20px;">
        <p id="statusImage" style="color: gray;"></p>
        <img id="uploadedMemeImage" src="" alt="Hasil edit gambar" style="max-width: 100%; display: none; border-radius: 8px; margin-top: 10px;" />
      </div>
    </div>
  </div>

  <img src="images/art.png" id="openArtModalBtn" alt="Buka Art Generator" class="clickable art-button" />
  <div id="artModal" class="modal">
    <div class="modal-content">
      <span class="close" id="closeArtModal">&times;</span>
      <h2>🎨 Art Generator</h2>
      <input type="text" id="artPrompt" placeholder="Enter your prompt..." style="margin-top: 10px; width: 100%; padding: 8px;" />
      <button id="generateArtBtn" style="margin-top: 10px; padding: 10px 20px;">Generate Art</button>
      <div id="resultAreaArt" style="margin-top: 20px;">
        <p id="statusArt" style="color: gray;"></p>
        <img id="uploadedArtImage" src="" alt="Hasil art dari prompt" style="max-width: 100%; display: none; border-radius: 8px; margin-top: 10px;" />
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const uploadedArtImage = document.getElementById('uploadedArtImage');
      const statusArt = document.getElementById('statusArt');

      document.getElementById('generateArtBtn').addEventListener('click', async () => {
        const prompt = document.getElementById('artPrompt').value;
        if (!prompt) return;

        statusArt.textContent = 'Generating...';
        uploadedArtImage.style.display = 'none';

        try {
          const response = await fetch('/api/generate', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ prompt }),
          });

          const result = await response.json();
          if (result.image_url) {
            uploadedArtImage.src = result.image_url;
            uploadedArtImage.style.display = 'block';
            statusArt.textContent = '';
          } else {
            throw new Error('Image URL not returned');
          }
        } catch (error) {
          console.error(error);
          statusArt.textContent = 'Error generating image.';
        }
      });

      const mediumIcon = document.getElementById('mediumIcon');
      mediumIcon.addEventListener('click', async () => {
        const mediumFeed = 'https://api.rss2json.com/v1/api.json?rss_url=https://medium.com/feed/@hamzahnorsihab07';
        const container = document.getElementById('mediumArticles');
        container.innerHTML = 'Loading...';

        try {
          const res = await fetch(mediumFeed);
          const data = await res.json();

          if (data.items && data.items.length > 0) {
            container.innerHTML = data.items.map(item => `<p><a href="${item.link}" target="_blank">${item.title}</a></p>`).join('');
          } else {
            container.innerHTML = 'No articles found.';
          }
        } catch (err) {
          container.innerHTML = 'Failed to load articles.';
        }
      });
    });
  </script>

  <script src="script.js" defer></script>
</body>
</html>